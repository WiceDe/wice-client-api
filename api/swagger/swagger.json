{
  "openapi": "3.0.0",
  "info": {
    "description": "This is a client API for Wice CRM",
    "version": "0.0.1",
    "title": "Wice CRM API",
    "termsOfService": "https://wice.de",
    "contact": {
      "email": "support@wice.de"
    },
    "license": {
      "name": "Apache-2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "tags": [{
      "name": "user",
      "description": "User management",
      "externalDocs": {
        "description": "Find out more",
        "url": "https://wice.de"
      }
    },
    {
      "name": "resources",
      "description": "Manipulate stored resources",
      "externalDocs": {
        "description": "Find out more",
        "url": "https://wice.de"
      }
    }
  ],
  "security": [{
    "CookieAuth": []
  }],
  "paths": {
    "/pserv/base/webvis": {
      "post": {
        "tags": [
          "user"
        ],
        "x-swagger-router-controller": "user",
        "summary": "Login user",
        "description": "Login in Wice CRM.",
        "responses": {
          "200": {
            "description": "Supplies the cookie after successful login",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/loginUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid input"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/loginUser"
              }
            }
          },
          "description": "Mandant name and username which will be passed on to the server",
          "required": true
        }
      }
    },
    "/plugin/wp_wice_client_api_backend/json": {
      "get": {
        "tags": [
          "resources"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "method",
            "description": "Determines the type of resource to be fetched.",
            "schema": {
              "type": "string",
              "enum": ["get_all_persons", "get_all_organizations", "get_all_articles"]
            },
            "required": true
          },
          {
            "in": "query",
            "name": "full_list",
            "description": "If set to 1, will return all entries in one object. Otherwise will return paginated results",
            "schema": {
              "type": "number",
              "enum": [1,0]
            },
            "required": false
          },
        ],
        "x-swagger-router-controller": "resources",
        "summary": "Get a list of a chosen resource",
        "description": "Returns all available persons, organizations, or articles, depending on the chosen method",
        "responses": {
          "200": {
            "description": "An array of all requested objects",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/getPersonResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid input"
          }
        }
      },
      "post": {
        "tags": [
          "resources"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "method",
            "description": "Determines the operation to be executed.",
            "schema": {
              "type": "string",
              "enum": ["insert_contact", "insert_company", "insert_article", "update_contact", "update_company", "update_article", "delete_person", "delete_company", "delete_article"]
            },
            "required": true
          }
        ],
        "x-swagger-router-controller": "resources",
        "summary": "Manipulate a resource",
        "description": "Create, update, or delete persons, companies, or articles, depending on chosen method.",
        "responses": {
          "200": {
            "description": "Supplies the new created person",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/createPersonResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid input"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/createPersonRequest"
              }
            }
          },
          "description": "First name and last name which will be passed on to the server",
          "required": true
        }
      }
    }
  },
  "externalDocs": {
    "description": "Find out more about Wice CRM",
    "url": "https://wice.de"
  },
  "servers": [{
      "url": "https://{server}.wice-net.de",
      "variables": {
        "server": {
          "default": "oihwice"
        }
      }
    },
    {
      "url": "http://localhost:5000/"
    }
  ],
  "components": {
    "securitySchemes": {
      "CookieAuth": {
        "type": "apiKey",
        "in": "query",
        "name": "cookie"
      }
    },
    "schemas": {
      "loginUser": {
        "type": "object",
        "required": [
          "mandant_name",
          "username",
          "password"
        ],
        "properties": {
          "mandant_name": {
            "type": "string",
            "example": "companygmbh"
          },
          "username": {
            "type": "string",
            "example": "maxmustermann"
          },
          "password": {
            "type": "string",
            "example": "yourpassword"
          }
        }
      },
      "loginUserResponse": {
        "type": "object",
        "properties": {
          "cookie": {
            "type": "string",
            "example": "5pd8m4jxaab8sp3mi4yluhkjrhmhqpug"
          }
        }

      },
      "getPersonResponse": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "rowid": {
              "type": "string",
              "example": "821528"
            },
            "mandant": {
              "type": "string",
              "example": "821528"
            },
            "for_rowid": {
              "type": "string",
              "example": "821528"
            },
            "same_contactperson": {
              "type": "string",
              "example": "821528"
            },
            "name": {
              "type": "string",
              "example": "821528"
            },
            "firstName": {
              "type": "string",
              "example": "821528"
            },
            "email": {
              "type": "string",
              "example": "821528"
            },
            "title": {
              "type": "string",
              "example": "821528"
            },
            "salutation": {
              "type": "string",
              "example": "821528"
            },
            "birthday": {
              "type": "string",
              "example": "821528"
            },
            "private_street": {
              "type": "string",
              "example": "821528"
            },
            "private_street_number": {
              "type": "string",
              "example": "821528"
            },
            "private_zip_code": {
              "type": "string",
              "example": "821528"
            },
            "private_town": {
              "type": "string",
              "example": "821528"
            },
            "private_state": {
              "type": "string",
              "example": "821528"
            },
            "private_country": {
              "type": "string",
              "example": "821528"
            },
            "phone": {
              "type": "string",
              "example": "821528"
            },
            "fax": {
              "type": "string",
              "example": "821528"
            },
            "private_phone": {
              "type": "string",
              "example": "821528"
            },
            "private_mobile_phone": {
              "type": "string",
              "example": "821528"
            },
            "private_email": {
              "type": "string",
              "example": "821528"
            }
          }
        }
      },
      "createPersonRequest": {
        "type": "object",
        "required": [
          "name",
          "firstname"
        ],
        "properties": {
          "firstname": {
            "type": "string",
            "example": "John"
          },
          "name": {
            "type": "string",
            "example": "Doe"
          },
          "email": {
            "type": "string",
            "example": "jdoe@mail.com"
          }
        }
      },
      "createOrganizationRequest": {
        "type": "object",
        "required": [
          "name",
          "email"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "Company Ltd."
          },
          "email": {
            "type": "string",
            "example": "info@company.com"
          }
        }
      },
      "createPersonResponse": {
        "type": "object",
        "required": [
          "firstName",
          "lastName"
        ],
        "properties": {}
      },
      "updatePersonRequest": {
        "type": "object",
        "properties": {
          "dto": {
            "type": "object",
            "properties": {}
          }
        }
      },
      "updatePersonResponse": {
        "type": "object",
        "required": [
          "uid"
        ],
        "properties": {
          "id": {
            "type": "string",
            "example": "3gbbk1jmq1l9m1"
          },
          "eventName": {
            "type": "string",
            "example": "PersonUpdated"
          },
          "timeStamp": {
            "type": "string",
            "example": "1537791125834"
          },
          "causalId": {
            "type": "string",
            "example": "0"
          },
          "payload": {
            "type": "object",
            "properties": {
              "uid": {
                "type": "string",
                "example": "3gbbt1jmfzrnd5"
              },
              "dto": {

                "type": "object",
                "properties": {
                  "lastName": {
                    "type": "string",
                    "example": "Stevens"
                  },
                  "addresses": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "uid": {
                          "type": "string",
                          "example": "3gbbk1jmpzr69r"
                        },
                        "street": {
                          "type": "string",
                          "example": "Wendenstr"
                        },
                        "streetNumber": {
                          "type": "string",
                          "example": "120"
                        },
                        "unit": {
                          "type": "string",
                          "example": "Hammerbrook"
                        },
                        "zipcode": {
                          "type": "string",
                          "example": "20537"
                        },
                        "city": {
                          "type": "string",
                          "example": "Hamburg"
                        },
                        "district": {
                          "type": "string",
                          "example": "HH-Hamburg"
                        },
                        "region": {
                          "type": "string",
                          "example": "Hamburg"
                        },
                        "country": {
                          "type": "string",
                          "example": "Germany"
                        },
                        "countryCode": {
                          "type": "string",
                          "example": "0049"
                        },
                        "primaryContact": {
                          "type": "string",
                          "example": "true"
                        },
                        "description": {
                          "type": "string",
                          "example": "Private Address"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "deletePersonsRequest": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "example": "[\"3gbbp1jm6ez2o4\", \"3gbbp1jm6f2q7y\"]"
      },
      "deletePersonResponse": {
        "type": "object",
        "required": [
          "uid"
        ],
        "properties": {
          "id": {
            "type": "string",
            "example": "3gbbk1jmq3nv5q"
          },
          "eventName": {
            "type": "string",
            "example": "PersonDeleted"
          },
          "timeStamp": {
            "type": "string",
            "example": "1537791877918"
          },
          "causalId": {
            "type": "string",
            "example": "0"
          },
          "payload": {
            "type": "object",
            "properties": {
              "uid": {
                "type": "string",
                "example": "3gbbt1jmfzrnd5"
              }
            }
          }
        }
      },
      "getOrganizationResponse": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "rowid": {
              "type": "string",
              "example": "821528"
            },
            "mandant": {
              "type": "string",
              "example": "821528"
            },
            "for_rowid": {
              "type": "string",
              "example": "821528"
            },
            "name": {
              "type": "string",
              "example": "Company Ltd."
            },
            "email": {
              "type": "string",
              "example": "info@company.com"
            },
            "street": {
              "type": "string",
              "example": "Main Str."
            },
            "street_number": {
              "type": "string",
              "example": "441"            },
            "zip_code": {
              "type": "string",
              "example": "821528"
            },
            "p_o_box": {
              "type": "string",
              "example": "B41C"
            },
            "town": {
              "type": "string",
              "example": "New York City"
            },
            "state": {
              "type": "string",
              "example": "New York"
            },
            "country": {
              "type": "string",
              "example": "USA"
            },
            "phone": {
              "type": "string",
              "example": "82152587588"
            },
            "fax": {
              "type": "string",
              "example": "82759871528"
            }
          }
        }
      },
      "createOrganizationResponse": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "id": {
            "type": "string",
            "example": "3gbbk1jmq3nv5q"
          },
          "eventName": {
            "type": "string",
            "example": "OrganizationCreated"
          },
          "timeStamp": {
            "type": "string",
            "example": "1538386602109"
          },
          "causalId": {
            "type": "string",
            "example": "0"
          },
          "payload": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "example": "Wice GmbH"
              },
              "logo": {
                "type": "string",
                "example": "Logo"
              },
              "addresses": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "uid": {
                      "type": "string",
                      "example": "3gbbk1jmpzr69r"
                    },
                    "street": {
                      "type": "string",
                      "example": "Wendenstr"
                    },
                    "streetNumber": {
                      "type": "string",
                      "example": "120"
                    },
                    "unit": {
                      "type": "string",
                      "example": "Hammerbrook"
                    },
                    "zipcode": {
                      "type": "string",
                      "example": "20537"
                    },
                    "city": {
                      "type": "string",
                      "example": "Hamburg"
                    },
                    "district": {
                      "type": "string",
                      "example": "HH-Hamburg"
                    },
                    "region": {
                      "type": "string",
                      "example": "Hamburg"
                    },
                    "country": {
                      "type": "string",
                      "example": "Germany"
                    },
                    "countryCode": {
                      "type": "string",
                      "example": "0049"
                    },
                    "primaryContact": {
                      "type": "string",
                      "example": "true"
                    },
                    "description": {
                      "type": "string",
                      "example": "Public Address"
                    }
                  }
                }
              },
              "uid": {
                "type": "string",
                "example": "3gbbk1jmq0i53k"
              }
            }
          }
        }
      },
      "updateOrganizationRequest": {
        "type": "object",
        "properties": {
          "dto": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "example": "Changed GmbH"
              },
              "addresses": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "uid": {
                      "type": "string",
                      "example": "3gbbu1jmkewc87"
                    },
                    "street": {
                      "type": "string",
                      "example": "Wendenstr"
                    },
                    "streetNumber": {
                      "type": "string",
                      "example": "120"
                    },
                    "unit": {
                      "type": "string",
                      "example": "Hammerbrook"
                    },
                    "zipcode": {
                      "type": "string",
                      "example": "20537"
                    },
                    "city": {
                      "type": "string",
                      "example": "Hamburg"
                    },
                    "district": {
                      "type": "string",
                      "example": "HH-Hamburg"
                    },
                    "region": {
                      "type": "string",
                      "example": "Hamburg"
                    },
                    "country": {
                      "type": "string",
                      "example": "Germany"
                    },
                    "countryCode": {
                      "type": "string",
                      "example": "0049"
                    },
                    "primaryContact": {
                      "type": "string",
                      "example": "true"
                    },
                    "description": {
                      "type": "string",
                      "example": "Private Address"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "updateOrganizationResponse": {
        "type": "object",
        "required": [
          "uid"
        ],
        "properties": {
          "id": {
            "type": "string",
            "example": "3gbbj1jmg9ko6j"
          },
          "eventName": {
            "type": "string",
            "example": "OrganizationUpdated"
          },
          "timeStamp": {
            "type": "string",
            "example": "1537791125834"
          },
          "causalId": {
            "type": "string",
            "example": "0"
          },
          "payload": {
            "type": "object",
            "properties": {
              "uid": {
                "type": "string",
                "example": "3gbbt1jmfzrnd5"
              },
              "dto": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Changed GmbH"
                  },
                  "addresses": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "uid": {
                          "type": "string",
                          "example": "3gbbu1jmkewc87"
                        },
                        "street": {
                          "type": "string",
                          "example": "Wendenstr"
                        },
                        "streetNumber": {
                          "type": "string",
                          "example": "120"
                        },
                        "unit": {
                          "type": "string",
                          "example": "Hammerbrook"
                        },
                        "zipcode": {
                          "type": "string",
                          "example": "20537"
                        },
                        "city": {
                          "type": "string",
                          "example": "Hamburg"
                        },
                        "district": {
                          "type": "string",
                          "example": "HH-Hamburg"
                        },
                        "region": {
                          "type": "string",
                          "example": "Hamburg"
                        },
                        "country": {
                          "type": "string",
                          "example": "Germany"
                        },
                        "countryCode": {
                          "type": "string",
                          "example": "0049"
                        },
                        "primaryContact": {
                          "type": "string",
                          "example": "true"
                        },
                        "description": {
                          "type": "string",
                          "example": "Private Address"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
