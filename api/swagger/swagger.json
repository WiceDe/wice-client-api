{
  "openapi": "3.0.0",
  "info": {
    "description": "This is a client API for Wice CRM",
    "version": "0.0.1",
    "title": "Wice CRM API",
    "termsOfService": "https://wice.de",
    "contact": {
      "email": "support@wice.de"
    },
    "license": {
      "name": "Apache-2.0",
      "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
    }
  },
  "tags": [{
      "name": "user",
      "description": "User management",
      "externalDocs": {
        "description": "Find out more",
        "url": "https://wice.de"
      }
    },
    {
      "name": "resources",
      "description": "Manipulate stored resources",
      "externalDocs": {
        "description": "Find out more",
        "url": "https://wice.de"
      }
    }
  ],
  "security": [{
    "CookieAuth": []
  }],
  "paths": {
    "/pserv/base/webvis": {
      "post": {
        "tags": [
          "user"
        ],
        "x-swagger-router-controller": "user",
        "summary": "Login user",
        "description": "Login in Wice CRM.",
        "responses": {
          "200": {
            "description": "Supplies the cookie after successful login",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/loginUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid input"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/loginUser"
              }
            }
          },
          "description": "Mandant name and username which will be passed on to the server",
          "required": true
        }
      }
    },
    "/plugin/wp_wice_client_api_backend/json": {
      "get": {
        "tags": [
          "resources"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "method",
            "description": "Determines the type of resource to be fetched.",
            "schema": {
              "type": "string",
              "enum": ["get_all_persons", "get_all_companies", "get_all_articles"]
            },
            "required": true
          },
          {
            "in": "query",
            "name": "full_list",
            "description": "If set to 1, will return all entries in one object. Otherwise will return paginated results",
            "schema": {
              "type": "number",
              "enum": [1]
            },
            "required": false
          },
        ],
        "x-swagger-router-controller": "resources",
        "summary": "Get a list of a chosen resource",
        "description": "Returns all available persons, organizations, or articles, depending on the chosen method",
        "responses": {
          "200": {
            "description": "An array of all requested objects",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    "$ref": "#/components/schemas/getPersonResponse",
                    "$ref": "#/components/schemas/getOrganizationResponse",
                    "$ref": "#/components/schemas/getArticleResponse"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Invalid input"
          }
        }
      },
      "post": {
        "tags": [
          "resources"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "method",
            "description": "Determines the operation to be executed.",
            "schema": {
              "type": "string",
              "enum": ["insert_contact", "insert_company", "insert_article", "update_contact", "update_company", "update_article", "delete_person", "delete_company", "delete_article"]
            },
            "required": true
          }
        ],
        "x-swagger-router-controller": "resources",
        "summary": "Manipulate a resource",
        "description": "Create, update, or delete persons, companies, or articles, depending on chosen method.",
        "responses": {
          "200": {
            "description": "Supplies the rowid of the created resource",
            "content": {
              "application/json": {
                "schema": {
                  "oneOf": [
                    "$ref": "#/components/schemas/createPersonResponse",
                    "$ref": "#/components/schemas/createOrganizationResponse",
                    "$ref": "#/components/schemas/createArticleResponse",
                    "$ref": "#/components/schemas/updatePersonResponse",
                    "$ref": "#/components/schemas/updateOrganizationResponse",
                    "$ref": "#/components/schemas/updateArticleResponse",
                    "$ref": "#/components/schemas/deletePersonResponse",
                    "$ref": "#/components/schemas/deleteOrganizationResponse",
                    "$ref": "#/components/schemas/deleteArticleResponse"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "Invalid input"
          }
        },
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "oneOf": [
                  "$ref": "#/components/schemas/createPersonRequest",
                  "$ref": "#/components/schemas/createOrganizationRequest",
                  "$ref": "#/components/schemas/createArticleRequest",
                  "$ref": "#/components/schemas/updatePersonRequest",
                  "$ref": "#/components/schemas/updateOrganizationRequest",
                  "$ref": "#/components/schemas/updateArticleRequest",
                  "$ref": "#/components/schemas/deletePersonRequest",
                  "$ref": "#/components/schemas/deleteOrganizationRequest",
                  "$ref": "#/components/schemas/deleteArticleRequest"
                ]
              }
            }
          },
          "description": "The data of the resource to be created, please refer to the appropriate schema depending on resource type.",
          "required": true
        }
      }
    }
  },
  "externalDocs": {
    "description": "Find out more about Wice CRM",
    "url": "https://wice.de"
  },
  "servers": [{
      "url": "https://{server}.wice-net.de",
      "variables": {
        "server": {
          "default": "oihwice"
        }
      }
    },
    {
      "url": "http://localhost:5000/"
    }
  ],
  "components": {
    "securitySchemes": {
      "CookieAuth": {
        "type": "apiKey",
        "in": "query",
        "name": "cookie"
      }
    },
    "schemas": {
      "loginUser": {
        "type": "object",
        "required": [
          "mandant_name",
          "username",
          "password"
        ],
        "properties": {
          "mandant_name": {
            "type": "string",
            "example": "companygmbh"
          },
          "username": {
            "type": "string",
            "example": "maxmustermann"
          },
          "password": {
            "type": "string",
            "example": "yourpassword"
          }
        }
      },
      "loginUserResponse": {
        "type": "object",
        "properties": {
          "cookie": {
            "type": "string",
            "example": "5pd8m4jxaab8sp3mi4yluhkjrhmhqpug"
          }
        }

      },
      "getPersonResponse": {
        "type": "object",
        "properties": {
          "loop_addresses": {
            "type": "array",
            "items": {
          "type": "object",
              "properties": {
                "rowid": {
                  "type": "string",
                  "example": "821528"
                },
                "mandant": {
                  "type": "string",
                  "example": "sandbox"
                },
                "for_rowid": {
                  "type": "string",
                  "example": "946512"
                },
                "same_contactperson": {
                  "type": "string",
                },
                "name": {
                  "type": "string",
                  "example": "Doe"
                },
                "firstName": {
                  "type": "string",
                  "example": "Jane"
                },
                "email": {
                  "type": "string",
                  "example": "jane@doe.com"
                },
                "title": {
                  "type": "string",
                  "example": "Dr."
                },
                "salutation": {
                  "type": "string",
                  "example": "Greetings"
                },
                "birthday": {
                  "type": "string",
                  "example": "01.01.2000"
                },
                "private_street": {
                  "type": "string",
                  "example": "Europaplatz"
                },
                "private_street_number": {
                  "type": "string",
                  "example": "12"
                },
                "private_zip_code": {
                  "type": "string",
                  "example": "10115"
                },
                "private_town": {
                  "type": "string",
                  "example": "Berlin"
                },
                "private_state": {
                  "type": "string",
                  "example": "Berlin"
                },
                "private_country": {
                  "type": "string",
                  "example": "Germany"
                },
                "phone": {
                  "type": "string",
                  "example": "0124/5478"
                },
                "fax": {
                  "type": "string",
                  "example": "0124/5478"
                },
                "private_phone": {
                  "type": "string",
                  "example": "0124/5478"
                },
                "private_mobile_phone": {
                  "type": "string",
                  "example": "0124/5478"
                },
                "private_email": {
                  "type": "string",
                  "example": "jandedoe@gmail.com"
                }
              }
            }
          }
        }
      },
      "getArticleResponse": {
        "type": "object",
        "properties": {
          "loop_articles": {
            "type": "array",
            "items": {
          "type": "object",
              "properties": {
          "description": {
            "type": "string",
            "example": "Beispielartikel",
            "description": "Article description in your default language"
          },
          "description2": {
            "type": "string",
            "example": "Example article",
            "description": "Article description in your secondary language"
          },
          "long_description": {
            "type": "string",
            "example": "Dies ist ein Beispielartikel",
            "description": "Longer article description in your default language"
          },
          "long_descriptio2n": {
            "type": "string",
            "example": "This is an example article",
            "description": "Longer article description in your secondary language"
          },
          "number": {
            "type": "string",
            "example": "auto"
          },
          "purchase_price": {
            "type": "string",
            "example": "400"
          },
          "sales_price": {
            "type": "string",
            "example": "500"
          },
          "tax": {
            "type": "string",
            "example": "19"
          }
        }
            }
          }
        }
      },
      "createPersonRequest": {
        "type": "object",
        "required": [
          "name",
          "firstname"
        ],
        "properties": {
          "firstname": {
            "type": "string",
            "example": "John"
          },
          "name": {
            "type": "string",
            "example": "Doe"
          },
          "email": {
            "type": "string",
            "example": "jdoe@mail.com"
          }
        }
      },
      "createOrganizationRequest": {
        "type": "object",
        "required": [
          "name",
          "email"
        ],
        "properties": {
          "name": {
            "type": "string",
            "example": "Company Ltd."
          },
          "email": {
            "type": "string",
            "example": "info@company.com"
          }
        }
      },
      "createArticleRequest": {
        "type": "object",
        "required": [
          "description",
          "purchase_price",
          "sales_price"
        ],
        "properties": {
          "description": {
            "type": "string",
            "example": "Beispielartikel",
            "description": "Article description in your default language"
          },
          "description2": {
            "type": "string",
            "example": "Example article",
            "description": "Article description in your secondary language"
          },
          "long_description": {
            "type": "string",
            "example": "Dies ist ein Beispielartikel",
            "description": "Longer article description in your default language"
          },
          "long_descriptio2n": {
            "type": "string",
            "example": "This is an example article",
            "description": "Longer article description in your secondary language"
          },
          "number": {
            "type": "string",
            "example": "auto"
          },
          "purchase_price": {
            "type": "string",
            "example": "400"
          },
          "sales_price": {
            "type": "string",
            "example": "500"
          },
          "tax": {
            "type": "string",
            "example": "19"
          }
        }
      },
      "updateArticleRequest": {
        "type": "object",
        "required": [
          "rowid"
        ],
        "properties": {
          "rowid": {
            "type": "string",
            "example": "1582"
          },
          "description": {
            "type": "string",
            "example": "Beispielartikel",
            "description": "Article description in your default language"
          },
          "description2": {
            "type": "string",
            "example": "Example article",
            "description": "Article description in your secondary language"
          },
          "long_description": {
            "type": "string",
            "example": "Dies ist ein Beispielartikel",
            "description": "Longer article description in your default language"
          },
          "long_descriptio2n": {
            "type": "string",
            "example": "This is an example article",
            "description": "Longer article description in your secondary language"
          },
          "number": {
            "type": "string",
            "example": "auto"
          },
          "purchase_price": {
            "type": "string",
            "example": "400"
          },
          "sales_price": {
            "type": "string",
            "example": "500"
          },
          "tax": {
            "type": "string",
            "example": "19"
          }
        }
      },
      "createPersonResponse": {
        "type": "object",
        "properties": {
          "rowid": {
            "type": "number",
            "example": 16239
          }
        }
      },
      "updatePersonRequest": {
        "type": "object",
        "required": [
          "rowid"
        ],
        "properties": {
          "rowid": {
            "type": "string",
            "example": "821652"
          },
          "firstname": {
            "type": "string",
            "example": "John"
          },
          "name": {
            "type": "string",
            "example": "Doe"
          },
          "email": {
            "type": "string",
            "example": "jdoe@mail.com"
          }
        }
      },
      "updatePersonResponse": {
        "type": "object",
        "properties": {
          "rowid": {
            "type": "number",
            "example": 16239
          }
        }
      },
      "deletePersonRequest": {
        "type": "object",
        "properties": {
          "rowid": {
            "type": "string",
            "example": "81436"
          }
        },
      },
      "deleteOrganizationRequest": {
        "type": "object",
        "properties": {
          "rowid": {
            "type": "string",
            "example": "81436"
          }
        },
      },
      "deleteArticleRequest": {
        "type": "object",
        "properties": {
          "rowid": {
            "type": "string",
            "example": "81436"
          }
        },
      },
      "deletePersonResponse": {
        "type": "string",
        "example": "Deletion successful!"
      },
      "deleteOrganizationResponse": {
        "type": "string",
        "example": "Deletion successful!"
      },
      "deleteArticleResponse": {
        "type": "string",
        "example": "Deletion successful!"
      },
      "getOrganizationResponse": {
        "type": "object",
        "properties": {
          "loop_addresses": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "rowid": {
                  "type": "string",
                  "example": "821528"
                },
                "mandant": {
                  "type": "string",
                  "example": "821528"
                },
                "for_rowid": {
                  "type": "string",
                  "example": "821528"
                },
                "name": {
                  "type": "string",
                  "example": "Company Ltd."
                },
                "email": {
                  "type": "string",
                  "example": "info@company.com"
                },
                "street": {
                  "type": "string",
                  "example": "Main Str."
                },
                "street_number": {
                  "type": "string",
                  "example": "441"            },
                "zip_code": {
                  "type": "string",
                  "example": "821528"
                },
                "p_o_box": {
                  "type": "string",
                  "example": "B41C"
                },
                "town": {
                  "type": "string",
                  "example": "New York City"
                },
                "state": {
                  "type": "string",
                  "example": "New York"
                },
                "country": {
                  "type": "string",
                  "example": "USA"
                },
                "phone": {
                  "type": "string",
                  "example": "82152587588"
                },
                "fax": {
                  "type": "string",
                  "example": "82759871528"
                }
              }
            }
          }
        }
      },
      "createOrganizationResponse": {
        "type": "object",
        "properties": {
          "rowid": {
            "type": "number",
            "example": 16239
          }
        }
      },
      "createArticleResponse": {
        "type": "object",
        "properties": {
          "rowid": {
            "type": "number",
            "example": 16239
          }
        }
      },
      "updateOrganizationRequest": {
        "type": "object",
        "required": [
          "rowid"
        ],
        "properties": {
          "rowid": {
            "type": "string",
            "example": "80672"
          },
          "name": {
            "type": "string",
            "example": "Company Ltd."
          },
          "email": {
            "type": "string",
            "example": "info@company.com"
          }
        }
      },
      "updateOrganizationResponse": {
        "type": "object",
        "properties": {
          "rowid": {
            "type": "number",
            "example": 16239
          }
        }
      },
      "updateArticleResponse": {
        "type": "object",
        "properties": {
          "rowid": {
            "type": "number",
            "example": 16239
          }
        }
      }
    }
  }
}
